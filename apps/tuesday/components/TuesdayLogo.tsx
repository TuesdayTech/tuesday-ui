import React, { useContext } from "react";
import { View } from "react-native";
import Svg, { Path, G } from "react-native-svg";
import { NavExpandedCtx, NavThemeCtx } from "./nav-context";

const LOGO_HEIGHT = 24;
const ASPECT_RATIO = 291 / 54;
const LOGO_WIDTH = LOGO_HEIGHT * ASPECT_RATIO;

export function TuesdayLogo() {
  const expanded = useContext(NavExpandedCtx);
  const t = useContext(NavThemeCtx);
  const fill = t?.foreground ?? "#EDEDED";

  return (
    <View
      style={{
        width: LOGO_WIDTH,
        height: LOGO_HEIGHT,
      }}
    >
      <Svg
        width={LOGO_WIDTH}
        height={LOGO_HEIGHT}
        viewBox="0 0 291 54"
        fill="none"
      >
        {/* Mark — always visible */}
        <Path d="M24.3575 0H48.3575L24.3575 23.7314H0.357544L24.3575 0Z" fill={fill} />
        <Path d="M14.7572 29.2686H26.7572L38.7572 17.4028V53H14.7572V29.2686Z" fill={fill} />

        {/* Wordmark — animated opacity */}
        <G
          opacity={expanded ? 1 : 0}
          style={{
            transitionProperty: "opacity",
            transitionDuration: expanded ? "150ms" : "100ms",
            transitionDelay: expanded ? "80ms" : "0ms",
            transitionTimingFunction: "ease-out",
          } as any}
        >
          <Path d="M74.6828 52.3507V24.0964H62.7451L68.5839 18.2507H91.0508V24.0964H81.1131V52.3507H74.6828Z" fill={fill} />
          <Path d="M111.018 53.0327C102.639 53.0327 97.6706 48.1613 97.6706 40.367V18.2507H104.101V40.5618C104.101 44.7513 106.537 47.2844 111.018 47.2844C115.5 47.2844 117.936 44.7513 117.936 40.5618V18.2507H124.366V40.367C124.366 48.1613 119.397 53.0327 111.018 53.0327Z" fill={fill} />
          <Path d="M132.544 52.3507V18.2507H154.465V24.0964H138.974V32.2317H153.101V38.0774H138.974V46.505H154.758V52.3507H132.544Z" fill={fill} />
          <Path d="M175.739 53.0327C167.848 53.0327 162.343 48.6484 162.343 41.2438V39.8798H168.676V41.2438C168.676 45.3358 171.355 47.3818 175.739 47.3818C180.124 47.3818 182.316 45.4333 182.316 42.7053C182.316 39.8798 179.831 38.9056 175.447 37.9313L174.327 37.6877C167.263 36.1288 163.122 33.7418 163.122 27.5064C163.122 21.271 167.848 17.5687 175.155 17.5687C182.462 17.5687 187.772 21.271 187.772 28.6756V30.137H181.439V28.6756C181.439 24.7784 179.052 23.2196 175.155 23.2196C171.258 23.2196 169.455 24.7784 169.455 27.3116C169.455 29.8447 171.355 31.0626 175.447 31.9394L176.567 32.183C183.826 33.7418 188.649 36.275 188.649 42.5104C188.649 48.7458 183.631 53.0327 175.739 53.0327Z" fill={fill} />
          <Path d="M196.177 52.3507V46.6998H200.659V23.9016H196.177V18.2507H210.207C219.365 18.2507 224.236 22.9273 224.236 32.0856V38.5158C224.236 47.6741 219.365 52.3507 210.207 52.3507H196.177ZM207.089 46.505H210.304C215.468 46.505 217.806 43.6796 217.806 38.7107V31.8907C217.806 26.9219 215.468 24.0964 210.304 24.0964H207.089V46.505Z" fill={fill} />
          <Path d="M230.382 52.3507L239.345 18.2507H250.549L259.513 52.3507H252.888L251.037 44.8487H238.858L237.007 52.3507H230.382ZM240.368 38.9056H249.527L245.797 23.9739H244.084L240.368 38.9056Z" fill={fill} />
          <Path d="M272.253 52.3507V40.6106L260.659 18.2507H267.82L275.03 32.865H275.906L283.116 18.2507H290.277L278.683 40.6106V52.3507H272.253Z" fill={fill} />
        </G>
      </Svg>
    </View>
  );
}
