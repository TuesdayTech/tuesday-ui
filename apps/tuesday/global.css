@import "tailwindcss/theme.css" layer(theme);
@import "tailwindcss/preflight.css" layer(base);
@import "tailwindcss/utilities.css";
@import "nativewind/theme";

@source "./app/**/*.{ts,tsx}";
@source "./components/**/*.{ts,tsx}";
@source "./hooks/**/*.{ts,tsx}";
@source "../../packages/ui/src/**/*.{ts,tsx}";

/* Non-color tokens — regular @theme generates CSS variables */
@theme {
  --font-sans: "GeistSans";
  --font-mono: "GeistMono";

  --radius-xs: 2px;
  --radius-sm: 4px;
  --radius-md: 8px;
  --radius-lg: 12px;
  --radius-xl: 16px;
  --radius-2xl: 24px;

  /* Font sizes (iOS naming) */
  --text-caption: 12px;
  --text-caption--line-height: 16px;
  --text-footnote: 13px;
  --text-footnote--line-height: 18px;
  --text-subheadline: 14px;
  --text-subheadline--line-height: 20px;
  --text-body: 16px;
  --text-body--line-height: 24px;
  --text-callout: 18px;
  --text-callout--line-height: 26px;
  --text-title3: 20px;
  --text-title3--line-height: 28px;
  --text-title2: 24px;
  --text-title2--line-height: 32px;
  --text-title1: 28px;
  --text-title1--line-height: 36px;
  --text-largeTitle: 34px;
  --text-largeTitle--line-height: 42px;
  --text-display: 48px;
  --text-display--line-height: 56px;
}

/*
 * Color tokens — @theme inline bakes values directly into utility classes
 * (e.g. bg-background → background-color: #FFFFFF instead of var(--color-background)).
 *
 * This avoids the delayed-variable-resolution (dv:1) bug in react-native-css
 * where var() resolution overwrites dark mode class-level overrides.
 */
@theme inline {
  --color-background: #FFFFFF;
  --color-background-secondary: #FAFAFA;
  --color-background-tertiary: #F5F5F5;

  --color-foreground: #171717;
  --color-foreground-muted: #666666;
  --color-foreground-subtle: #999999;

  --color-accent: #0A84FF;
  --color-success: #2EA043;
  --color-error: #E5484D;
  --color-warning: #F5A623;
  --color-info: #0070F3;

  --color-border: #EAEAEA;
  --color-border-secondary: #F0F0F0;

  --color-gray-50: #FAFAFA;
  --color-gray-100: #F5F5F5;
  --color-gray-200: #E5E5E5;
  --color-gray-300: #D4D4D4;
  --color-gray-400: #A3A3A3;
  --color-gray-500: #737373;
  --color-gray-600: #525252;
  --color-gray-700: #3D3D3D;
  --color-gray-800: #292929;
  --color-gray-900: #171717;
}

/*
 * Dark mode overrides.
 *
 * Class-level overrides work on BOTH web and native.
 * On web: CSS @media query naturally applies.
 * On native: react-native-css evaluates media conditions on class rules correctly
 * (same mechanism as dark:bg-black which IS proven to work).
 *
 * See: https://github.com/nativewind/nativewind/issues/1640
 *      https://github.com/nativewind/react-native-css/issues/255
 */
@media (prefers-color-scheme: dark) {
  .bg-background { background-color: #000000; }
  .bg-background-secondary { background-color: #111111; }
  .bg-background-tertiary { background-color: #1A1A1A; }
  .bg-border { background-color: #333333; }

  .text-foreground { color: #EDEDED; }
  .text-foreground-muted { color: #A1A1A1; }
  .text-foreground-subtle { color: #707070; }

  .border-border { border-color: #333333; }
  .border-border-secondary { border-color: #222222; }
  .border-background { border-color: #000000; }
}
